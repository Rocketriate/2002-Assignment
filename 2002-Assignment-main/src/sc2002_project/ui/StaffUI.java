package sc2002_project.ui;


import sc2002_project.entities.CareerCentreStaff;
import sc2002_project.entities.FilterOptions;
import sc2002_project.entities.InternshipOpportunity;
import sc2002_project.entities.ReportCriteria;
import sc2002_project.controllers.ApprovalController;
import sc2002_project.controllers.ReportController;

import java.util.List;
import java.util.Scanner;
public class StaffUI {
    private String activeId;
    private ReportCriteria currentFilter;
    private final ApprovalController approvalController;
    private final ReportController reportController;
    private final Scanner sc = new Scanner(System.in);

    public StaffUI(ApprovalController approvalController, ReportController reportController) {
        this.activeId = null;
        this.approvalController = approvalController;
        this.reportController = reportController;
    }

    public void runMenu(CareerCentreStaff user, LoginUI loginUI) {
        System.out.println("Welcome, " + user.getName());
        activeId = user.getUserID();
        currentFilter = new ReportCriteria(user);
        boolean operation = true;
        while (operation) {
            System.out.println("What would you like to do today?");
            System.out.println("1. View pending internship opportunities");
            System.out.println("2. Approve internship opportunities");
            System.out.println("3. View pending company representatives");
            System.out.println("4. Approve company representatives");
            System.out.println("5. View application withdrawal requests");
            System.out.println("6. Approve application withdrawal requests");
            System.out.println("7. Update viewing filters -> Report Generation");
            System.out.println("8. Change account password");
            System.out.println("9. Logout");
            System.out.println("Choose an option:");
            String choice = sc.nextLine().trim();
            switch (choice) {
                case "1":
                    approvalController.viewPendingOpp(activeId);
                    break;
                case "2":
                    approvalController.approveOpp(activeId);
                    break;
                case "3":
                    approvalController.viewPendingRep(activeId);
                    break;
                case "4":
                    approvalController.approveRep(activeId);
                    break;
                case "5":
                    approvalController.viewPendingWithdraw(activeId);
                    break;
                case "6":
                    approvalController.approveWithdraw(activeId);
                    break;
                case "7":
                    ReportCriteria criteria = reportController.updateFilters(currentFilter);
                    List<InternshipOpportunity> result = reportController.generate(activeId, criteria);
                    reportController.printReport(result);
                    break;
                case "8":
                    loginUI.changePassword();
                    break;
                case "9":
                    operation = false;
                    break;
                default:
                    System.out.println("Error: Invalid choice. Please choose an option from 1-9");
                    break;
            }
        }
        activeId = null;
        currentFilter = null;
        System.out.println("Thank you for using the internship placement system");
        loginUI.logout();
        loginUI.start();
    }

}








































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































